---
import Header from "@/components/layout/Header";
import "../styles/base.css";
import ThemeProvider from "@/components/ThemeProvider";
import Footer from "@/components/layout/Footer";
import Toast from "@/components/Toast";
import BaseMeta from "@/components/layout/BaseMeta";
import type { siteMeta } from "src/types";
import { SITE_DESCRIPTION } from "@/utils/constant";

interface Props {
	meta: siteMeta
}

const { meta: { title, description = SITE_DESCRIPTION, ogImage } } = Astro.props
---

<html lang="en">
	<head>
		<BaseMeta title={title} description={description} ogImage={ogImage} />
		<script
			defer
			src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"
		></script>
		<title>Astro</title>
	</head>
	<body class="overflow-x-hidden">
	<Toast />
		<lottie-player
			src="https://lottie.host/d4f0fd92-950f-4bb4-aa41-12d9382b3cff/1r8SpK8Mxj.json"
			speed="1"
			id="stars"
			class="bg-transparent top-0 bottom-0 left-0 right-0 -z-10 absolute"
			direction="1"
			mode="normal"></lottie-player>
		<ThemeProvider />
		<Header />
		<slot />
		<Footer />
	</body>
</html>

<script>
	const animation = document.getElementById("stars") as HTMLVideoElement & { stop: () => void };
	if (animation) {
		document.documentElement.addEventListener("show-stars", () => {
			animation.stop();
			animation.play();
		});
	}
</script>
